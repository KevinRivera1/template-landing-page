---
import { Menu } from '@data/menu.ts';
import Logo from '@assets/svg/logo.svg';
---

<header class="header relative shadow">
    <div class="header-wrapper flex items-center justify-between container mx-auto p-4 lg:px-0">
        <div class="logo">
            <a href="http://">
               <Logo class="aspect-square h-6" />
            </a>
        </div>
        <nav class="nav hidden lg:block">
            <ul class="nav-items flex">
                {
                    Menu.map((item)=>{
                        return (
                            <li class="nav-item relative">
                                <a href={item.link} class="nav-item-link p-2 relative after:content-[''] after:absolute after:left-0 after:bottom-0 after:w-0 after:h-[.125rem] after:bg-blue-700 after:transition-all after:duration-300 hover:after:w-full">{item.name}</a>
                            </li>
                        )
                    })
                }
            </ul>
        </nav>
        <button id="btn-mobile" class="lg:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-align-right-icon lucide-align-right"><path d="M21 12H9"/><path d="M21 18H7"/><path d="M21 6H3"/></svg>
        </button>
    </div>
</header>

<nav class="nav-mobile absolute top-14 bottom-0 right-0 z-40 bg-white min-w-40 min-h-full rounded-b-xl hidden lg:hidden shadow-lg transition-all duration-300 ease-in-out">
    <div class="h-full w-full flex flex-col justify-center items-center">
        <ul class="nav-items flex justify-center items-center flex-col gap-4">
            {
                Menu.map((item)=>{
                    return (
                        <li class="nav-item relative">
                            <a href={item.link} class="nav-item-link p-2 relative after:content-[''] after:absolute after:left-0 after:bottom-0 after:w-0 after:h-[.125rem] after:bg-blue-700 after:transition-all after:duration-300 hover:after:w-full active:after:w-full">{item.name}</a>
                        </li>
                    )
                })
            }
        </ul>
    </div>
</nav>
<script>
    const btnMobile = document.getElementById('btn-mobile') as HTMLButtonElement;
    const navMobile = document.querySelector('.nav-mobile') as HTMLDivElement;
    const navItems = document.querySelectorAll('.nav-item-link') as NodeListOf<HTMLAnchorElement>;

    btnMobile.addEventListener('click', () => {
        navMobile.classList.toggle('hidden');
        navMobile.classList.toggle('flex');
    });

    window.addEventListener('resize', () => {
        if (window.innerWidth >= 1024) {
            navMobile.classList.add('hidden');
            navMobile.classList.remove('flex');
        }
    });

    document.addEventListener('click', (event) => {
        const isClickInside = navMobile.contains(event.target as Node);
        const isButtonClick = btnMobile.contains(event.target as Node);

        if (!isClickInside && !isButtonClick) {
            navMobile.classList.add('hidden');
            navMobile.classList.remove('flex');
        }
    });

    navItems.forEach((item) => {
        item.addEventListener('click', () => {
            navMobile.classList.add('hidden');
            navMobile.classList.remove('flex');
        });
    });
</script>